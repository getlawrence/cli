// OpenTelemetry bootstrap for {{.ServiceName}} (JavaScript/Node.js, CommonJS)

// Install packages:
// npm install @opentelemetry/api @opentelemetry/sdk-node @opentelemetry/exporter-trace-otlp-http{{range .Instrumentations}} @opentelemetry/instrumentation-{{.}}{{end}}

// Create file: otel.js and require it at process start

async function setupOTel() {
  const { NodeSDK } = require("@opentelemetry/sdk-node");
  const { OTLPTraceExporter } = require("@opentelemetry/exporter-trace-otlp-http");

  const sdk = new NodeSDK({
    traceExporter: new OTLPTraceExporter({}),
  });
  await sdk.start();
  process.on("SIGTERM", async () => { await sdk.shutdown(); });
  return sdk;
}

module.exports = { setupOTel };


